<?php/** * @author Timothy Dunn * @copyright 2010 */ $MusicDir = "/home/nobues/Saved Music/";if(isset($_GET['album'])){    $MusicDir = "/home/nobues/Saved Music/" . $_GET['album'] . "/";}function CountAlbums($MusicDirL){    $count = 0;    if($handleB = opendir($MusicDirL)){	while (false !== ($file = readdir($handleB))) {	    if($file !== "." && $file !== ".."){		if(isset($_GET['album'])){		    if(is_dir($MusicDirL) && substr_count($file, '.mp3') > 0){			$count++;		    }		} else {		    if(is_dir($MusicDirL)){			$count++;		    }		}	    }	}	return $count;    }}print('    <script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"></script>    <script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>    <script type="text/javascript" language="javascript" src="js/jquery.dataTables.js"></script>    <link type="text/css" rel="stylesheet" href="css/custom-theme/jquery-ui-1.8.2.custom.css" />    <link type="text/css" rel="stylesheet" href="css/demo_table_jui.css" />    <link type="text/css" rel="stylesheet" href="css/media.css" />        <script type="text/javascript">			$(document).ready(function(){			 $(\'.dataTable\').dataTable({			              		"sPaginationType": "full_numbers",					                    "bJQueryUI": true,                          });   			});    </script>');if ($handle = opendir($MusicDir)) {    print('        <table width="100%" border="0" class="display dataTable mediaTable">            <thead style="height: 19px;">                <tr style="white-space: nowrap;">                    <th style="width: 20px;"><div class="HeadNum"> No<div></th>    ');        if(isset($_GET['album'])){        $tmp = explode("/", $_GET['album']);    } else {        $tmp = array();    }        if(count($tmp) > 1){        print('<th>Song</th>');        print('<th style="width: 200px;">File Size</th>');    } else {        if(isset($_GET['album'])){            print('<th>Albums</th>');            print('<th style="width: 200px;">Songs</th>');        } else {            print('<th>Artist</th>');            print('<th style="width: 200px;">Albums</th>');        }    }    print('                </tr>            </thead>            <tbody>    ');        $count = 0;    if(isset($_GET['album'])){        print('            <tr>                <td></td>                <td class="backBtnRow"><a href="file.php">Back</a></td>                <td style="text-align:center;"></td>            </tr>        ');    }        while (false !== ($file = readdir($handle))) {        if($file !== "." && $file !== ".."){            if(is_dir($MusicDir.$file.'/')){                $count++;                print('<tr><td style="text-align:center;">'.$count.'</td>');                if(isset($_GET['album'])){                    print('<td><a href="file.php?album='.$_GET['album'] . '/' . $file.'">'.$file.'</a></td>');                }else{                    print('<td><a href="file.php?album='.$file.'">'.$file.'</a></td>');                }                print('<td style="text-align:center;">'.CountAlbums($MusicDir.$file.'/').'</td></tr>');            } else {                if(isset($_GET['album'])){                    if(substr_count($file, '.mp3') > 0){                        $count++;                        $tmp = explode("/", $_GET['album']);                                                $Imgfile = file_get_contents('file:///'.$MusicDir.$tmp[1].'.png');                        $chart_image_name = $tmp[1].'.png';                         $full_image_path = 'tmp/'.$chart_image_name;                        file_put_contents($full_image_path,$Imgfile);			                        print('<tr><td style="text-align:center;">'.$count.'</td>');                         print('<td style="text-shadow:2px 2px 4px #8EAFD1;"><a href="'.$full_image_path.'"><img align="absbottom" src="'.$full_image_path.'" height="16px" width="16px" border=0/></a> &nbsp;&nbsp;'.$file.'</td>');                        print('<td style="text-align:center;">'.number_format(filesize($MusicDir.$file), 0, ',', ',').' MB</td></tr>');                    }                }            }        }    }        print('            </tbody>	            <tfoot>                <tr style="white-space: nowrap;">                    <th style="width: 20px;"><div class="HeadNum"> No<div></th>    ');        if(count($tmp) > 1){        print('<th>Song</th>');        print('<th style="width: 200px;">File Size</th>');    } else {        if(isset($_GET['album'])){            print('<th>Albums</th>');            print('<th style="width: 200px;">Songs</th>');        } else {            print('<th>Artist</th>');            print('<th style="width: 200px;">Albums</th>');        }    }    print('                </tr>            </tfoot>        </table>    ');         }?>